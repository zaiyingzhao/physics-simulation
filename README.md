# physics-simulation
**ソフトウェアⅡ第2回**

## bouncing1.c
2次元の万有引力に支配された物体の運動シミュレーションを行うコードを書きました。 微小時間後の速度はオイラー法に基づいて定義しました。  
また壁にぶつかったときに反射する（壁を飛び越えない）ようにしました。  
my_update_velocitiesを一般化するために物体ごとの加速度を格納する配列accx[], accy[]を設定して、それを参照する形をとりました。  
実行してみると物体同士が近づいた際に特に大きな引力が働くのでそこから物体が暴れだしますが、これは妥当な動きです。

## bouncing2.c
読み込んだファイルから初期配置を決められるようにbouncing1.cを変更しました。**実行方法は./bouncing2 data.dat**です。  
実行の仕方が想定したものでないときにエラー出力するようにしました。  
入力された物体数とファイル内の物体数が一致しないときの対応は以下を参照   
* 入力された物体数の方が少ないとき、ファイル内の情報を配列に格納して参照しない情報があるだけなので問題なし
* 入力された物体数の方が多いとき、ファイル内の情報を格納する配列の全要素を一度0に初期化しているので、超過分の物体の質量は0と初期化され実質的な影響はない（質量が0の物体はプロットされないようにしました）

## bouncing3.c
物体同士の距離が一定値(=5)以下になったとき、物体同士が融合するようにしました。    
融合するときobjsに格納されている番号が若いほうに融合させ、質量を2物体の質量の合計に変更、速度を運動量保存則に従って変更しました。  
もう一方の物体の質量は0に変更して、それ以降他の物体に影響を及ぼさないようにしました（質量が0の物体はプロットしないようにしています）。

## bouncing4.c（発展課題）
conditionに新たに磁場magnetic, objectに電荷qを追加し、物体にはたらく力として万有引力の他に磁場によるローレンツ力を加えました。  
my_update_velocitiesにおいて右ねじの法則に注意してローレンツ力による加速度の変化分も加えることで実装することができます。  
実際に実行してみると物体が円運動に近い動きをし、直感に反さないシミュレーションが行えます。  
